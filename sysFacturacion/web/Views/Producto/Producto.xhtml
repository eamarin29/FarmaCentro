<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <body>
        <ui:composition template="./../../Plantilla/Plantilla.xhtml">
            <ui:define name="content">
                <h3 class="titulo_gestion"> Gestión de Productos</h3>

                <p:growl id="message" showDetail="true" />

                <h:form id="frmNuevoProducto">
                    <p:growl id="message" showDetail="true" />
                    <p:dialog id="dgNuevoProducto" widgetVar="dialogNuevoProducto" resizable="false"
                              showEffect="explode" width="1300px"
                              hideEffect="explode" modal="true" header="Crear un nuevo Producto">
                        <p:messages id="messageAgregarProductos"  showDetail="true" autoUpdate="true" closable="true"  /> 
                        <table>
                            <tr>
                                <td> <p:outputLabel value="Codigo de barras:"></p:outputLabel> </td> 
                                <p:spacer></p:spacer>
                                <td> <p:inputText  value="#{productoBean.producto.codBarras}"></p:inputText>  </td> 

                                <td> <p:outputLabel value="Nombre:"></p:outputLabel> </td> 
                                <td>   <p:inputText style="text-transform:uppercase;"  value="#{productoBean.producto.nombre}"></p:inputText> </td> 
                            </tr>
                        </table>
                        <br></br>
                        <table> 
                            <tr>
                                <td width="50px;">
                                </td>
                                <td width="90px;">
                                    Cant. paquete*
                                </td> 
                                <td width="90px;">
                                    Descrip. paquete*
                                </td>
                                <td width="100px;">
                                    Uni. paquete*
                                </td>
                                <td width="120px;">
                                    $Compra*
                                </td>
                                <td width="90px;">
                                    %Dto. Compra
                                </td>
                                <td width="120px;">
                                    $Compra Real
                                </td>
                                <td width="90px;"> 
                                    % de Utilidad*
                                </td>
                                <td width="120px;">
                                    $Venta Sugerido
                                </td>
                                <td width="120px;">
                                    $Venta Real*
                                </td>
                                <td width="100px;">
                                    % de Comision
                                </td>
                                <td width="120px;">
                                    $ de Comision
                                </td>
                                <td width="90px;">
                                    Stock Mínimo*
                                </td>
                            </tr>
                            <tr>
                                <td>  
                                </td> 
                                <td> <p:inputNumber  decimalPlaces="0" size="2" binding="#{productoBean.txtCantidadPaquete}" placeholder="100"  >
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputText binding="#{productoBean.txtDescripcionPaquete}" style="width: 70px; text-transform:uppercase;" placeholder="UNI" ></p:inputText>
                                </td> 
                                <td> <p:outputLabel  value="X"  ></p:outputLabel> <p:inputNumber  decimalPlaces="0" size="3" binding="#{productoBean.txtUnidadXPaquete}" placeholder="1"> </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" decimalPlaces="2" size="6" binding="#{productoBean.txtCompra}" >
                                        <p:ajax  event="change" listener="#{productoBean.cambioTxtCompra()}"
                                                 update=":frmNuevoProducto:txtCompraReal, :frmNuevoProducto:txtVentaSugerida"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" decimalPlaces="2" size="2" binding="#{productoBean.txtDescuentoCompra}"  >
                                        <p:ajax  event="change" listener="#{productoBean.cambioTxtCompra()}"
                                                 update=":frmNuevoProducto:txtCompraReal, :frmNuevoProducto:txtVentaSugerida"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber  id="txtCompraReal" decimalPlaces="2" size="6" binding="#{productoBean.txtCompraReal}" disabled="true" ></p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" decimalPlaces="2" size="2" binding="#{productoBean.txtPorcentajeUtilidad}" >
                                        <p:ajax  event="change" listener="#{productoBean.cambioTxtCompra()}"
                                                 update=":frmNuevoProducto:txtCompraReal, :frmNuevoProducto:txtVentaSugerida"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber id="txtVentaSugerida" decimalPlaces="2" size="6" binding="#{productoBean.txtVentaSugerida}" disabled="true" ></p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" decimalPlaces="2" size="6" binding="#{productoBean.txtVentaReal}" >
                                        <p:ajax  event="change" listener="#{productoBean.cambioComision()}"
                                                 update=":frmNuevoProducto:txtPrecioComision"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" decimalPlaces="2" size="2" binding="#{productoBean.txtComision}" >
                                        <p:ajax  event="change" listener="#{productoBean.cambioComision()}"
                                                 update=":frmNuevoProducto:txtPrecioComision"></p:ajax> 
                                    </p:inputNumber>
                                </td>
                                <td> <p:inputNumber id="txtPrecioComision" decimalPlaces="2" size="5" disabled="true" binding="#{productoBean.txtPrecioComision}" ></p:inputNumber>
                                </td> 
                                <td> <p:inputNumber id="txtStockMinimo" decimalPlaces="0" size="2"  binding="#{productoBean.txtStockMinimo}" ></p:inputNumber>
                                </td> 

                            </tr>

                            <tr>
                                <td>
                                    <p:selectBooleanCheckbox id="check1" style="background-color: white;" value="#{productoBean.check1}">
                                        <p:ajax update=":frmNuevoProducto:txtStockMinimo1, :frmNuevoProducto:check1, :frmNuevoProducto:txtCantidadPaquete1, :frmNuevoProducto:txtDescripcionPaquete1, :frmNuevoProducto:txtUnidadXPaquete1, :frmNuevoProducto:txtCompra1, :frmNuevoProducto:txtDescuentoCompra1, :frmNuevoProducto:txtCompraReal1, :frmNuevoProducto:txtVentaSugerida1, :frmNuevoProducto:txtPrecioComision1, :frmNuevoProducto:txtPorcentajeUtilidad1, :frmNuevoProducto:txtVentaReal1, frmNuevoProducto:txtComision1" listener="#{productoBean.selectCheck1()}" />
                                    </p:selectBooleanCheckbox>
                                </td> 
                                <td> <p:inputNumber decimalPlaces="0" size="2" id="txtCantidadPaquete1" binding="#{productoBean.txtCantidadPaquete1}" disabled="true" >
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputText id="txtDescripcionPaquete1" binding="#{productoBean.txtDescripcionPaquete1}" disabled="true" style="width: 70px; text-transform:uppercase;" ></p:inputText>
                                </td> 
                                <td> <p:outputLabel id="x1" binding="#{productoBean.x1}" value="X"  ></p:outputLabel> <p:inputNumber  decimalPlaces="0" size="3" id="txtUnidadXPaquete1" binding="#{productoBean.txtUnidadXPaquete1}" disabled="true" >
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" decimalPlaces="2" size="6" id="txtCompra1" binding="#{productoBean.txtCompra1}" disabled="true"  >
                                        <p:ajax  event="change" listener="#{productoBean.cambioTxtCompra1()}"
                                                 update=":frmNuevoProducto:txtCompraReal1, :frmNuevoProducto:txtVentaSugerida1"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" decimalPlaces="2" size="2" id="txtDescuentoCompra1" binding="#{productoBean.txtDescuentoCompra1}" disabled="true" >
                                        <p:ajax  event="change" listener="#{productoBean.cambioTxtCompra1()}"
                                                 update=":frmNuevoProducto:txtCompraReal1, :frmNuevoProducto:txtVentaSugerida1"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber decimalPlaces="2" size="6" id="txtCompraReal1" binding="#{productoBean.txtCompraReal1}"  disabled="true" ></p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" decimalPlaces="2" size="2" id="txtPorcentajeUtilidad1" binding="#{productoBean.txtPorcentajeUtilidad1}" disabled="true">
                                        <p:ajax  event="change" listener="#{productoBean.cambioTxtCompra1()}"
                                                 update=":frmNuevoProducto:txtCompraReal1, :frmNuevoProducto:txtVentaSugerida1"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber decimalPlaces="2" size="6" id="txtVentaSugerida1" binding="#{productoBean.txtVentaSugerida1}" disabled="true"  ></p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }"  decimalPlaces="2" size="6" id="txtVentaReal1" binding="#{productoBean.txtVentaReal1}" disabled="true" >
                                        <p:ajax  event="change" listener="#{productoBean.cambioComision1()}"
                                                 update=":frmNuevoProducto:txtPrecioComision1"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }"  decimalPlaces="2" size="2" id="txtComision1" binding="#{productoBean.txtComision1}" disabled="true" >
                                        <p:ajax  event="change" listener="#{productoBean.cambioComision1()}"
                                                 update=":frmNuevoProducto:txtPrecioComision1"></p:ajax> 
                                    </p:inputNumber>
                                </td>
                                <td> <p:inputNumber id="txtPrecioComision1" decimalPlaces="2" size="5" disabled="true" binding="#{productoBean.txtPrecioComision1}" ></p:inputNumber>
                                </td> 
                                <td> <p:inputNumber id="txtStockMinimo1" decimalPlaces="0" size="2"  binding="#{productoBean.txtStockMinimo1}" disabled="true" ></p:inputNumber>
                                </td> 
                            </tr>

                            <tr>
                                <td>
                                    <p:selectBooleanCheckbox id="check2" style="background-color: white;" value="#{productoBean.check2}">
                                        <p:ajax  update=":frmNuevoProducto:txtStockMinimo2, :frmNuevoProducto:check2, :frmNuevoProducto:txtCantidadPaquete2, :frmNuevoProducto:txtDescripcionPaquete2, :frmNuevoProducto:txtUnidadXPaquete2, :frmNuevoProducto:txtCompra2, :frmNuevoProducto:txtDescuentoCompra2, :frmNuevoProducto:txtPorcentajeUtilidad2, :frmNuevoProducto:txtVentaReal2, frmNuevoProducto:txtComision2, :frmNuevoProducto:txtCompraReal2, :frmNuevoProducto:txtVentaSugerida2, :frmNuevoProducto:txtPrecioComision2" listener="#{productoBean.selectCheck2()}" />
                                    </p:selectBooleanCheckbox>
                                </td> 
                                <td> <p:inputNumber  decimalPlaces="0" size="2" id="txtCantidadPaquete2" binding="#{productoBean.txtCantidadPaquete2}" disabled="true" > 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputText  id="txtDescripcionPaquete2" binding="#{productoBean.txtDescripcionPaquete2}" disabled="true" style="width: 70px; text-transform:uppercase;" ></p:inputText>
                                </td> 
                                <td> <p:outputLabel id="x2" binding="#{productoBean.x2}" value="X" ></p:outputLabel> <p:inputNumber  decimalPlaces="0" size="3" id="txtUnidadXPaquete2" binding="#{productoBean.txtUnidadXPaquete2}" disabled="true" >
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" decimalPlaces="2" size="6" id="txtCompra2" binding="#{productoBean.txtCompra2}" disabled="true">
                                        <p:ajax  event="change" listener="#{productoBean.cambioTxtCompra2()}"
                                                 update=":frmNuevoProducto:txtCompraReal2, :frmNuevoProducto:txtVentaSugerida2"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" decimalPlaces="2" size="2" id="txtDescuentoCompra2" binding="#{productoBean.txtDescuentoCompra2}" disabled="true"  >
                                        <p:ajax  event="change" listener="#{productoBean.cambioTxtCompra2()}"
                                                 update=":frmNuevoProducto:txtCompraReal2, :frmNuevoProducto:txtVentaSugerida2"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber decimalPlaces="2" size="6" id="txtCompraReal2" binding="#{productoBean.txtCompraReal2}" disabled="true"  ></p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" decimalPlaces="2" size="2" id="txtPorcentajeUtilidad2" binding="#{productoBean.txtPorcentajeUtilidad2}" disabled="true"  >
                                        <p:ajax  event="change" listener="#{productoBean.cambioTxtCompra2()}"
                                                 update=":frmNuevoProducto:txtCompraReal2, :frmNuevoProducto:txtVentaSugerida2"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber decimalPlaces="2" size="6" id="txtVentaSugerida2" binding="#{productoBean.txtVentaSugerida2}"  disabled="true"  ></p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }"  decimalPlaces="2" size="6" id="txtVentaReal2" binding="#{productoBean.txtVentaReal2}" disabled="true">
                                        <p:ajax  event="change" listener="#{productoBean.cambioComision2()}"
                                                 update=":frmNuevoProducto:txtPrecioComision2"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }"  decimalPlaces="2" size="2" id="txtComision2" binding="#{productoBean.txtComision2}" disabled="true"  >
                                        <p:ajax  event="change" listener="#{productoBean.cambioComision2()}"
                                                 update=":frmNuevoProducto:txtPrecioComision2"></p:ajax> 
                                    </p:inputNumber>
                                </td>
                                <td> <p:inputNumber id="txtPrecioComision2" decimalPlaces="2" size="5" disabled="true" binding="#{productoBean.txtPrecioComision2}" ></p:inputNumber>
                                </td> 
                                <td> <p:inputNumber id="txtStockMinimo2" decimalPlaces="0" size="2"  binding="#{productoBean.txtStockMinimo2}" disabled="true" ></p:inputNumber>
                                </td> 
                            </tr>

                            <tr>
                                <td>
                                    <p:selectBooleanCheckbox id="check3" style="background-color: white;" value="#{productoBean.check3}">
                                        <p:ajax update=":frmNuevoProducto:txtStockMinimo3, :frmNuevoProducto:check3, :frmNuevoProducto:txtCantidadPaquete3, :frmNuevoProducto:txtDescripcionPaquete3, :frmNuevoProducto:txtUnidadXPaquete3, :frmNuevoProducto:txtCompra3, :frmNuevoProducto:txtDescuentoCompra3, :frmNuevoProducto:txtPorcentajeUtilidad3, :frmNuevoProducto:txtVentaReal3, frmNuevoProducto:txtComision3, :frmNuevoProducto:txtCompraReal3, :frmNuevoProducto:txtVentaSugerida3, :frmNuevoProducto:txtPrecioComision3" listener="#{productoBean.selectCheck3()}" />
                                    </p:selectBooleanCheckbox>
                                </td> 
                                <td> <p:inputNumber  decimalPlaces="0" size="2" id="txtCantidadPaquete3" binding="#{productoBean.txtCantidadPaquete3}" disabled="true">
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputText id="txtDescripcionPaquete3"  binding="#{productoBean.txtDescripcionPaquete3}" disabled="true" style="width: 70px; text-transform:uppercase;" ></p:inputText>
                                </td> 
                                <td> <p:outputLabel id="x3"  binding="#{productoBean.x3}" value="X" ></p:outputLabel> <p:inputNumber  decimalPlaces="0" size="3" id="txtUnidadXPaquete3"  binding="#{productoBean.txtUnidadXPaquete3}" disabled="true" >
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" decimalPlaces="2" size="6" id="txtCompra3"  binding="#{productoBean.txtCompra3}" disabled="true"  >
                                        <p:ajax  event="change" listener="#{productoBean.cambioTxtCompra3()}"
                                                 update=":frmNuevoProducto:txtCompraReal3, :frmNuevoProducto:txtVentaSugerida3"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" decimalPlaces="2" size="2" id="txtDescuentoCompra3"  binding="#{productoBean.txtDescuentoCompra3}" disabled="true"  >
                                        <p:ajax  event="change" listener="#{productoBean.cambioTxtCompra3()}"
                                                 update=":frmNuevoProducto:txtCompraReal3, :frmNuevoProducto:txtVentaSugerida3"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber decimalPlaces="2" size="6" id="txtCompraReal3"  binding="#{productoBean.txtCompraReal3}"  disabled="true" ></p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" decimalPlaces="2" size="2" id="txtPorcentajeUtilidad3"  binding="#{productoBean.txtPorcentajeUtilidad3}" disabled="true" >
                                        <p:ajax  event="change" listener="#{productoBean.cambioTxtCompra3()}"
                                                 update=":frmNuevoProducto:txtCompraReal3, :frmNuevoProducto:txtVentaSugerida3"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber decimalPlaces="2" size="6" id="txtVentaSugerida3"  binding="#{productoBean.txtVentaSugerida3}"  disabled="true"   ></p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }"  decimalPlaces="2" size="6" id="txtVentaReal3"  binding="#{productoBean.txtVentaReal3}" disabled="true" >
                                        <p:ajax  event="change" listener="#{productoBean.cambioComision3()}"
                                                 update=":frmNuevoProducto:txtPrecioComision3"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }"  decimalPlaces="2" size="2" id="txtComision3" binding="#{productoBean.txtComision3}" disabled="true"  >
                                        <p:ajax  event="change" listener="#{productoBean.cambioComision3()}"
                                                 update=":frmNuevoProducto:txtPrecioComision3"></p:ajax> 
                                    </p:inputNumber>
                                </td>
                                <td> <p:inputNumber id="txtPrecioComision3" decimalPlaces="2" size="5" disabled="true" binding="#{productoBean.txtPrecioComision3}" ></p:inputNumber>
                                </td> 
                                <td> <p:inputNumber id="txtStockMinimo3" decimalPlaces="0" size="2"  binding="#{productoBean.txtStockMinimo3}" disabled="true" ></p:inputNumber>
                                </td> 
                            </tr>
                        </table>
                        <br></br>
                        <p:commandButton id="btnGuardarProductoNuevo" 
                                         action="#{productoBean.nuevoProducto()}" 
                                         update=":frmMostrarProductos:tablaProductos, :frmNuevoProducto:dgNuevoProducto, :frmNuevoProducto:messageAgregarProductos, message"
                                         title="Guardar registro" icon="ui-icon-guardar2">
                        </p:commandButton>
                        <p:commandButton style="float: right;" title="Limpiar" value="Limpiar"  action="#{productoBean.limpiarAgregarProducto()}"
                                         update=":frmNuevoProducto:dgNuevoProducto, :frmNuevoProducto:dgNuevoProducto" >    
                        </p:commandButton>
                        <p:commandButton style="float: right;" title="Cancelar" value="Cancelar" action="#{productoBean.cancelarRegistroProducto()}"
                                         update=":frmNuevoProducto" >
                        </p:commandButton>
                    </p:dialog>
                </h:form>

                <h:form id="frmModificarProducto">

                    <p:dialog id="dgModificarProducto" widgetVar="dialogModificarProducto" resizable="false" showEffect="explode"
                              hideEffect="explode" modal="true" header="Modificar producto">
                        <p:messages id="messageModificarProductos"  showDetail="true" autoUpdate="true" closable="true"  /> 
                        <table>
                            <tr>
                                <td> <p:outputLabel value="Nombre:"></p:outputLabel> </td> 
                                <td> <p:inputText style="width: 100%; text-transform:uppercase;" value="#{productoBean.producto.nombre}"></p:inputText>  </td> 
                            </tr>
                            <tr>
                                <td>  <p:outputLabel value="Stock minimo (U):"></p:outputLabel> </td> 
                                <td>  <p:inputNumber decimalPlaces="0" style="width: 100%;" value="#{productoBean.producto.stockMinUni}">
                                        <f:convertNumber type="number" pattern="#0" />
                                    </p:inputNumber> </td> 
                                <td>   <p:outputLabel value="Stock actual (U):"></p:outputLabel> </td> 
                                <td>   <p:inputNumber decimalPlaces="0" id="txtStockActualUniModificar" style="width: 100%;" value="#{productoBean.producto.stockActUni}">
                                        <f:convertNumber type="number" pattern="#0" />
                                    </p:inputNumber>  </td> 
                            </tr>
                        </table>
                        <br></br>
                        <table> 
                            <tr>
                                <td width="50px;">
                                </td>
                                <td width="90px;">
                                    Descrip. paquete*
                                </td>
                                <td width="100px;">
                                    Uni. paquete*
                                </td>
                                <td width="120px;">
                                    $Compra*
                                </td>
                                <td width="90px;">
                                    %Dto. Compra
                                </td>
                                <td width="120px;">
                                    $Compra Real
                                </td>
                                <td width="90px;"> 
                                    % de Utilidad*
                                </td>
                                <td width="120px;">
                                    $Venta Sugerido
                                </td>
                                <td width="120px;">
                                    $Venta Real*
                                </td>
                                <td width="100px;">
                                    % de Comision
                                </td>
                                <td width="120px;">
                                    $ de Comision
                                </td>
                            </tr>
                            <tr>
                                <td>  
                                </td> 
                                <td> <p:inputText value="#{productoBean.producto.paquete}" binding="#{productoBean.txtDescripcionPaqueteModificar}" style="width: 70px; text-transform:uppercase;" placeholder="UNI" ></p:inputText>
                                </td> 
                                <td> <p:outputLabel  value="X"  ></p:outputLabel> <p:inputNumber value="#{productoBean.producto.unidadXPaquete}"  decimalPlaces="0" size="3" binding="#{productoBean.txtUnidadXPaqueteModificar}" placeholder="1"> </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }"  decimalPlaces="2" size="6" binding="#{productoBean.txtCompraModificar}" value="#{productoBean.producto.precioCompra}">
                                        <p:ajax  event="change" listener="#{productoBean.cambioTxtCompraModificar()}"
                                                 update=":frmModificarProducto:txtCompraRealModificar, :frmModificarProducto:txtVentaSugeridaModificar"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" decimalPlaces="2" size="2" binding="#{productoBean.txtDescuentoCompraModificar}" value="#{productoBean.producto.porcentajeDescuento}" >
                                        <p:ajax  event="change" listener="#{productoBean.cambioTxtCompraModificar()}"
                                                 update=":frmModificarProducto:txtCompraRealModificar, :frmModificarProducto:txtVentaSugeridaModificar"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber  id="txtCompraRealModificar" decimalPlaces="2" size="6" binding="#{productoBean.txtCompraRealModificar}" disabled="true" value="#{productoBean.producto.precioCompraReal}"></p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" decimalPlaces="2" size="2" binding="#{productoBean.txtPorcentajeUtilidadModificar}" value="#{productoBean.producto.porcentajeUtilidad}">
                                        <p:ajax  event="change" listener="#{productoBean.cambioTxtCompraModificar()}"
                                                 update=":frmModificarProducto:txtCompraRealModificar, :frmModificarProducto:txtVentaSugeridaModificar"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber value="#{productoBean.producto.ventaSugerida}" id="txtVentaSugeridaModificar" decimalPlaces="2" size="6" binding="#{productoBean.txtVentaSugeridaModificar}" disabled="true" ></p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" decimalPlaces="2" size="6" binding="#{productoBean.txtVentaRealModificar}" value="#{productoBean.producto.precioVentaReal}" >
                                        <p:ajax  event="change" listener="#{productoBean.cambioComisionModificar()}"
                                                 update=":frmModificarProducto:txtPrecioComisionModificar"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" value="#{productoBean.producto.porcentajeComision}" decimalPlaces="2" size="2" binding="#{productoBean.txtComisionModificar}" >
                                        <p:ajax  event="change" listener="#{productoBean.cambioComisionModificar()}"
                                                 update=":frmModificarProducto:txtPrecioComisionModificar"></p:ajax> 
                                    </p:inputNumber>
                                </td>
                                <td> <p:inputNumber value="#{productoBean.producto.comision}" id="txtPrecioComisionModificar" decimalPlaces="2" size="5" disabled="true" binding="#{productoBean.txtPrecioComisionModificar}" ></p:inputNumber>
                                </td> 

                            </tr>
                        </table>
                        <br></br>
                        <p:commandButton id="btnGuardarPoductoModificado" 
                                         actionListener="#{productoBean.modificarProducto()}"
                                         update=":frmMostrarProductos, :frmModificarProducto"
                                         title="Guardar cambios" icon="ui-icon-guardar2">
                        </p:commandButton>
                        <p:commandButton style="float: right;" title="Cancelar" value="Cancelar" actionListener="#{productoBean.cancelarModificar()}"
                                         update=":frmMostrarProductos, :frmModificarProducto"
                                         >
                        </p:commandButton>
                    </p:dialog>
                </h:form>      

                <h:form id="frmEliminarProducto">
                    <p:growl id="message" showDetail="true" />
                    <p:dialog id="dgEliminarProducto" widgetVar="dialogEliminarProducto" resizable="false" showEffect="explode"
                              hideEffect="explode" modal="true" header="Eliminar Producto">

                        <h:outputText value="¿Seguro que desea eliminar este producto?"></h:outputText>
                        <br></br>
                        <br></br>
                        <p:commandButton id="yes"  
                                         action="#{productoBean.eliminarProducto()}" 
                                         update="frmMostrarProductos:tablaProductos, message"
                                         title="Eliminar producto" icon="ui-icon-yes">
                        </p:commandButton>
                        <p:commandButton style="float: right;" title="Cancelar" value="Cancelar" oncomplete="PF('dialogEliminarProducto').hide();">
                        </p:commandButton>
                    </p:dialog>
                </h:form>

                <h:form>
                    <p:commandButton value="Nuevo Producto" actionListener="#{productoBean.prepararNuevoProdcuto()}" 
                                     oncomplete="PF('dialogNuevoProducto').show();"
                                     update=":frmNuevoProducto">
                    </p:commandButton> 
                </h:form>  

                <h:form id="frmAgregarProducto">
                    <p:growl id="message" showDetail="true" />
                    <p:dialog id="dgAgregarProducto" widgetVar="dialogAgregarProducto" resizable="false" showEffect="explode"
                              hideEffect="explode" modal="true" header="Agregar producto">

                        <p:messages id="messageAgregarProductos"  showDetail="true" autoUpdate="true" closable="true"  /> 
                        <p:panelGrid columns="2" style="margin: 0 auto; width: 600px;">

                            <p:outputLabel value="Adicionar al Stock actual (U)"></p:outputLabel>
                            <p:inputNumber binding="#{productoBean.txtAdicionarProductos}" decimalPlaces="0" style="width: 100%;" >
                                <f:convertNumber type="number" pattern="#0" />
                            </p:inputNumber>

                        </p:panelGrid>
                        <br></br>
                        <p:commandButton id="btnGuardarPoductoModificado" 
                                         action="#{productoBean.adicionarProductosStock()}" 
                                         update="frmMostrarProductos:tablaProductos, frmAgregarProducto:messageAgregarProductos, frmAgregarProducto"
                                         title="Guardar cambios" icon="ui-icon-guardar2">
                        </p:commandButton>
                        <p:commandButton style="float: right;" title="Cancelar" value="Cancelar"
                                         action="#{productoBean.cancelarAdicionarProductosStock()}" 
                                         update="frmMostrarProductos:tablaProductos, frmAgregarProducto:messageAgregarProductos, frmAgregarProducto">
                        </p:commandButton>
                    </p:dialog>
                </h:form>  

                <h:form id="frmAgregarPaquetes">
                    <p:dialog id="dgAgregarPaquetes" widgetVar="dialogAgregarPaquetes" resizable="false" showEffect="explode"
                              hideEffect="explode" modal="true" header="Agregar Paquetes">
                   
                        <p:messages id="messageAgregarPaquetes"  showDetail="true" autoUpdate="true" closable="true"  /> 

                        <table>
                            <tr>
                                <td> <p:outputLabel value="Codigo de barras:"></p:outputLabel> </td> 
                                <p:spacer></p:spacer>
                                <td> <p:inputText disabled="true" value="#{productoBean.producto.codBarras}"></p:inputText>  </td> 

                                <td> <p:outputLabel value="Nombre:"></p:outputLabel> </td> 
                                <td>   <p:inputText disabled="true" style="text-transform:uppercase;"  value="#{productoBean.producto.nombre}"></p:inputText> </td> 
                            </tr>
                        </table>
                        <br></br>
                        <table> 
                            <tr>
                                <td width="50px;">
                                </td>
                                <td width="90px;">
                                    Cant. paquete*
                                </td> 
                                <td width="90px;">
                                    Descrip. paquete*
                                </td>
                                <td width="100px;">
                                    Uni. paquete*
                                </td>
                                <td width="120px;">
                                    $Compra*
                                </td>
                                <td width="90px;">
                                    %Dto. Compra
                                </td>
                                <td width="120px;">
                                    $Compra Real
                                </td>
                                <td width="90px;"> 
                                    % de Utilidad*
                                </td>
                                <td width="120px;">
                                    $Venta Sugerido
                                </td>
                                <td width="120px;">
                                    $Venta Real*
                                </td>
                                <td width="100px;">
                                    % de Comision
                                </td>
                                <td width="120px;">
                                    $ de Comision
                                </td>
                                <td width="90px;">
                                    Stock Mínimo*
                                </td>
                            </tr>
                            <tr>
                                <td>  
                                </td> 
                                <td> <p:inputNumber  decimalPlaces="0" size="2" binding="#{productoBean.txtCantidadPaqueteNuevo}" placeholder="100"  >
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputText binding="#{productoBean.txtDescripcionPaqueteNuevo}" style="width: 70px; text-transform:uppercase;" placeholder="UNI" ></p:inputText>
                                </td> 
                                <td> <p:outputLabel  value="X"  ></p:outputLabel> <p:inputNumber  decimalPlaces="0" size="3" binding="#{productoBean.txtUnidadXPaqueteNuevo}" placeholder="1"> </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" decimalPlaces="2" size="6" binding="#{productoBean.txtCompraNuevo}" >
                                        <p:ajax  event="change" listener="#{productoBean.cambioTxtCompraNuevo()}"
                                                 update=":frmAgregarPaquetes:txtCompraRealNuevo, :frmAgregarPaquetes:txtVentaSugeridaNuevo"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" decimalPlaces="2" size="2" binding="#{productoBean.txtDescuentoCompraNuevo}"  >
                                        <p:ajax  event="change" listener="#{productoBean.cambioTxtCompraNuevo()}"
                                                 update=":frmAgregarPaquetes:txtCompraRealNuevo, :frmAgregarPaquetes:txtVentaSugeridaNuevo"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber  id="txtCompraRealNuevo" decimalPlaces="2" size="6" binding="#{productoBean.txtCompraRealNuevo}" disabled="true" ></p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" decimalPlaces="2" size="2" binding="#{productoBean.txtPorcentajeUtilidadNuevo}" >
                                        <p:ajax  event="change" listener="#{productoBean.cambioTxtCompraNuevo()}"
                                                 update=":frmAgregarPaquetes:txtCompraRealNuevo, :frmAgregarPaquetes:txtVentaSugeridaNuevo"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber id="txtVentaSugeridaNuevo" decimalPlaces="2" size="6" binding="#{productoBean.txtVentaSugeridaNuevo}" disabled="true" ></p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" decimalPlaces="2" size="6" binding="#{productoBean.txtVentaRealNuevo}" >
                                        <p:ajax  event="change" listener="#{productoBean.cambioComisionNuevo()}"
                                                 update=":frmAgregarPaquetes:txtPrecioComisionNuevo"></p:ajax> 
                                    </p:inputNumber>
                                </td> 
                                <td> <p:inputNumber onblur="{
                                            onchange();
                                            return false;
                                        }" decimalPlaces="2" size="2" binding="#{productoBean.txtComisionNuevo}" >
                                        <p:ajax  event="change" listener="#{productoBean.cambioComisionNuevo()}"
                                                 update=":frmAgregarPaquetes:txtPrecioComisionNuevo"></p:ajax> 
                                    </p:inputNumber>
                                </td>
                                <td> <p:inputNumber id="txtPrecioComisionNuevo" decimalPlaces="2" size="5" disabled="true" binding="#{productoBean.txtPrecioComisionNuevo}" ></p:inputNumber>
                                </td> 
                                <td> <p:inputNumber id="txtStockMinimoNuevo" decimalPlaces="0" size="2"  binding="#{productoBean.txtStockMinimoNuevo}" ></p:inputNumber>
                                </td> 
                            </tr>
                        </table>

                        <br></br>
                        <p:commandButton id="btnGuardarPaquete" 
                                         action="#{productoBean.agregarPaquetes()}" 
                                         update="frmMostrarProductos:tablaProductos, frmAgregarPaquetes:messageAgregarPaquetes"
                                         title="Guardar cambios" icon="ui-icon-guardar2">
                        </p:commandButton>
                        <p:commandButton style="float: right;" title="Cancelar" value="Cancelar"
                                         action="#{productoBean.cancelarAgregarPaquetes()}" 
                                         update="frmMostrarProductos:tablaProductos, frmAgregarPaquetes:messageAgregarPaquetes">
                        </p:commandButton>

                    </p:dialog>
                </h:form>  

                <br></br>

                <h:form id="frmMostrarProductos">
                    <p:dataTable id="tablaProductos" var="pr" value="#{productoBean.listaProductos}" rows="4"
                                 paginator="true" rowsPerPageTemplate="2,4,10,20,40,80,160,320"
                                 emptyMessage="No hay Productos registrados hasta el momento."
                                 widgetVar="parametrosTabla" paginatorPosition="bottom"
                                 filteredValue="#{productoBean.filtroProductos}" style="width: 100%;"
                                 scrollable="true" scrollWidth="99.9%" >

                        <f:facet name="header">
                            <p:outputPanel>
                                <h:outputText value="Buscar en cualquier columna: " />
                                <p:spacer></p:spacer>
                                <p:inputText id="globalFilter" onkeyup="PF('parametrosTabla').filter()" style="width:150px" placeholder="Buscar..."/>
                            </p:outputPanel>
                        </f:facet>

                        <p:column style="text-align: center;  width: 200px;"  filterBy="#{pr.codBarras}" filterMatchMode="exact" headerText="Código de Barras:">
                            <h:outputText value="#{pr.codBarras}"></h:outputText>
                        </p:column>
                        <p:column style="text-align: center; width: 300px;" filterBy="#{pr.nombre}" filterMatchMode="contains"  headerText="Descripción del Producto:">
                            <h:outputText value="#{pr.nombre}"></h:outputText>
                        </p:column>
                        <p:column style="text-align: center; width: 140px;" filterBy="#{pr.stockActUni}" filterMatchMode="contains" headerText="Stock actual (U)">
                            <h:outputText value="#{pr.stockActUni}"></h:outputText>
                        </p:column>
                        <p:column style="text-align: center; width: 130px;" filterBy="#{pr.paquete}" filterMatchMode="contains"  headerText="Descripción Paquete">
                            <h:outputText value="#{pr.paquete}"></h:outputText>
                        </p:column>
                        <p:column style="text-align: center; width: 140px;" filterBy="#{pr.unidadXPaquete}" filterMatchMode="contains" headerText="Unidades x paquete">
                            <h:outputText value="#{pr.unidadXPaquete}"></h:outputText>
                        </p:column>
                        <p:column style="text-align: center; width: 140px;" filterBy="#{pr.precioCompra}" filterMatchMode="contains" headerText="Precio Compra">
                            <h:outputText value="#{pr.precioCompra}">
                                <f:convertNumber type="currency" currencySymbol="$" locale="en_US" />
                            </h:outputText>    
                        </p:column>
                        <p:column style="text-align: center; width: 130px;" filterBy="#{pr.porcentajeDescuento}" filterMatchMode="contains"  headerText="%Descuento Compra">
                            <h:outputText value="#{pr.porcentajeDescuento}"></h:outputText>
                        </p:column>
                        <p:column style="text-align: center; width: 150px;" filterBy="#{pr.precioCompraReal}" filterMatchMode="contains" headerText="Precio Compra Real">
                            <h:outputText value="#{pr.precioCompraReal}">
                                <f:convertNumber type="currency" currencySymbol="$" locale="en_US" />
                            </h:outputText>    
                        </p:column>
                        <p:column style="text-align: center; width: 140px;" filterBy="#{pr.porcentajeUtilidad}" filterMatchMode="contains"  headerText="% de Utilidad">
                            <h:outputText value="#{pr.porcentajeUtilidad}"></h:outputText>
                        </p:column>
                        <p:column style="text-align: center; width: 140px;" filterBy="#{pr.ventaSugerida}" filterMatchMode="contains" headerText="Precio Venta Sugerido">
                            <h:outputText value="#{pr.ventaSugerida}">
                                <f:convertNumber type="currency" currencySymbol="$" locale="en_US" />
                            </h:outputText>    
                        </p:column>
                        <p:column style="text-align: center; width: 140px;" filterBy="#{pr.precioVentaReal}" filterMatchMode="contains" headerText="Precio Venta Real">
                            <h:outputText value="#{pr.precioVentaReal}">
                                <f:convertNumber type="currency" currencySymbol="$" locale="en_US" />
                            </h:outputText>    
                        </p:column>
                        <p:column style="text-align: center; width: 140px;" filterBy="#{pr.comision}" filterMatchMode="contains" headerText="$ de Comisión">
                            <h:outputText value="#{pr.comision}"></h:outputText>
                        </p:column>
                        <p:column style="text-align: center; width: 130px;" filterBy="#{pr.porcentajeComision}" filterMatchMode="contains"  headerText="% de Comisión">
                            <h:outputText value="#{pr.porcentajeComision}"></h:outputText>
                        </p:column>
                        <p:column style="text-align: center; width: 140px;" filterBy="#{pr.stockMinUni}" filterMatchMode="contains" headerText="Stock mínimo (U)">
                            <h:outputText value="#{pr.stockMinUni}"></h:outputText>
                        </p:column>
                        <p:column headerText="Acciones" style="width: 260px;">
                            <p:commandButton title="Modificar registro" oncomplete="PF('dialogModificarProducto').show();"
                                             update=":frmModificarProducto" icon="ui-icon-modificar" >
                                <f:setPropertyActionListener target="#{productoBean.producto}" value="#{pr}">
                                </f:setPropertyActionListener>     
                            </p:commandButton>
                            <p:commandButton  title="Eliminar Registro" icon="ui-icon-delete2" 
                                              oncomplete="PF('dialogEliminarProducto').show();" update=":frmEliminarProducto">  
                                <f:setPropertyActionListener target="#{productoBean.producto}" value="#{pr}">
                                </f:setPropertyActionListener> 
                            </p:commandButton> 
                            <p:commandButton  title="Agregar más Productos" icon="ui-icon-agregar" 
                                              oncomplete="PF('dialogAgregarProducto').show();" update=":frmAgregarProducto">  
                                <f:setPropertyActionListener target="#{productoBean.producto}" value="#{pr}">
                                </f:setPropertyActionListener> 
                            </p:commandButton> 
                            <p:commandButton  title="Agregar más Paquetes" icon="ui-icon-carrito" 
                                              action="#{productoBean.verificarAgregarPaquetes()}" update=":frmAgregarPaquetes, message">  
                                <f:setPropertyActionListener target="#{productoBean.producto}" value="#{pr}">
                                </f:setPropertyActionListener> 
                            </p:commandButton> 
                        </p:column> 
                    </p:dataTable>    
                </h:form> 

            </ui:define>
        </ui:composition>
    </body>
</html>
